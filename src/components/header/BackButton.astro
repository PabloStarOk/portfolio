---
import Arrow from "@/icons/component-icons/Arrow.astro";
import AnchorButton from "../buttons/AnchorButton.astro";

const domain = Astro.url.origin;
---

<AnchorButton
  id="backButton"
  href="/"
  ariaLabel="Volver atrás"
  target="_self"
  type="tertiary"
>
  <Arrow style="fill: url(#brandGradient)" direction="left" />
  <span class="back-button__content">Atrás</span>
</AnchorButton>

<style>
  .back-button__content {
    /* Typography */
    font-size: var(--body-size-large);
    font-style: normal;
    font-weight: var(--body-font-weight-strong);
    line-height: 140%;
  }
</style>

<script is:inline data-domain={domain}>
  const backButton = document.getElementById("backButton");
  const domain = document.currentScript.dataset.domain;

  window.addEventListener("DOMContentLoaded", () => {
    const referrer = document.referrer;
    const isInternalReferrer = referrer.includes(domain);

    if (isInternalReferrer) {
      backButton.addEventListener("click", (event) => {
        event.preventDefault();
        window.history.back();
      });
    } else {
      backButton.href = "/";
    }
  });
</script>
